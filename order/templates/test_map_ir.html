<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="https://cdn.map.ir/web-sdk/1.4.2/css/mapp.min.css">
    <link rel="stylesheet" href="https://cdn.map.ir/web-sdk/1.4.2/css/fa/style.css">

    <style>
        @charset "utf-8";
        html, body {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }

        html {
            font-size: 10px;
        }

        body {
            overflow: hidden;
        }

        #app {
            width: 100%;
            height: 100%;
        }
    </style>

</head>
<body>

<div id="app"></div>

<script type="text/javascript" src="https://cdn.map.ir/web-sdk/1.4.2/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://cdn.map.ir/web-sdk/1.4.2/js/mapp.env.js"></script>
<script type="text/javascript" src="https://cdn.map.ir/web-sdk/1.4.2/js/mapp.min.js"></script>


<script>

    $(document).ready(function () {
        var app = new Mapp({
            element: '#app',
            presets: {
                latlng: {
                    lat: 35.73249,
                    lng: 51.42268
                },
                zoom: 10
            },
            apiKey: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjhiN2EwNjYwODY2YTMxZDAyNTA5NmZiYmIzZGVhZDQ4NDg4Y2VjYjQ0YTM5NTQxNzE3OTk4YjVjMTI1MGZjMDUxYjIxYmFmNDJkYjA2ZDMyIn0.eyJhdWQiOiIyMTQ5MSIsImp0aSI6IjhiN2EwNjYwODY2YTMxZDAyNTA5NmZiYmIzZGVhZDQ4NDg4Y2VjYjQ0YTM5NTQxNzE3OTk4YjVjMTI1MGZjMDUxYjIxYmFmNDJkYjA2ZDMyIiwiaWF0IjoxNjc4NzQ5OTY0LCJuYmYiOjE2Nzg3NDk5NjQsImV4cCI6MTY4MTE2OTE2NCwic3ViIjoiIiwic2NvcGVzIjpbImJhc2ljIl19.AobDdWKizuV0DAL8IFyUb8jLBrx8AzVu21HEOxAUTD8WhMZ-riaPX53e6_A7oj1NbwCBpTc8Jm3w2QAsYsTae2lCDoZB05X2pEcjoAYXpzRV2z-tBLgwairxtJunrKDSjKTIg9LpGzFu93xBQGmUnOfOho-Se4s_vIdUlrl19tdEPaKO763sHFQPnqf4Fbwh-L_ARuKaUV8j8aseg9n-vGbQ4w5juRbtMeNMm9adtt1ZVGWGUOJAHUD83IM4-FCiA7-P3Xincar-BXTY0PN1EK9Yvhn7akGQRudPYBsnU5NGe8ABmAFfXzdMwbSWnx1YO8fSfTmiQc2tHAqf1JmiIg'
        });
        app.addLayers();
        app.map.on('click', function (e) {
            // آدرس یابی و نمایش نتیجه در یک باکس مشخص
            app.showReverseGeocode({
                state: {
                    latlng: {
                        lat: e.latlng.lat,
                        lng: e.latlng.lng
                    },
                    zoom: 16
                }
            });
            app.addMarker({
                name: 'advanced-marker',
                latlng: {
                    lat: e.latlng.lat, {# ## TODO we should use these properties to save user selected point #}
                    lng: e.latlng.lng {# ## TODO we should use these properties to save user selected point #}
                },
                icon: app.icons.red,
                popup: false
            });

            // برای سفارشی سازی نمایش نتیجه به جای متد بالا از متد زیر میتوان استفاده کرد

            // app.findReverseGeocode({
            //   state: {
            //     latlng: {
            //       lat: e.latlng.lat,
            //       lng: e.latlng.lng
            //     },
            //     zoom: 16
            //   },
            //   after: function(data) {
            //     app.addMarker({
            //       name: 'advanced-marker',
            //       latlng: {
            //         lat: e.latlng.lat,
            //         lng: e.latlng.lng
            //       },
            //       icon: app.icons.red,
            //       popup: {
            //         title: {
            //           i18n: 'آدرس '
            //         },
            //         description: {
            //           i18n: data.address
            //         },
            //         class: 'marker-class',
            //         open: true
            //       }
            //     });
            //   }
            // });
        });
    });

</script>
</body>
</html>